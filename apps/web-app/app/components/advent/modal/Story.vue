<template>
  <UModal
    :ui="{
      content: 'max-w-md',
    }"
    :overlay="true"
  >
    <template #title>
      <div class="flex flex-row gap-2 items-center">
        <img src="/img/advent/fox.png" class="size-8">

        <h4 class="text-lg/5 font-semibold">
          Рождественская история «Тайна серебряного следа»
        </h4>
      </div>
    </template>

    <template #body>
      <div class="flex flex-col gap-3.5">
        <h4 class="text-lg/5 font-semibold">
          {{ part?.title }}
        </h4>

        <p class="text-base/5">
          {{ part?.text }}
        </p>

        <img
          v-if="part?.image"
          :src="part.image"
          class="mt-2 w-full rounded-lg"
        >
      </div>

      <UButton
        variant="solid"
        color="primary"
        size="xl"
        block
        class="mt-5"
        label="Закрыть"
        @click="onClick()"
      />
    </template>
  </UModal>
</template>

<script setup lang="ts">
const { day } = defineProps<{ day: AdventDay, onClick: () => void }>()

const parts = ref([
  {
    day: 1,
    title: 'Часть 1. Первый след в снегу',
    text: 'В заснеженном лесу, где ёлки стояли, словно застывшие стражи, маленький лисёнок Рыжик впервые увидел Волшебные огоньки. Они мерцали между деревьями — не жёлтые, как у светлячков, а голубые, будто звёзды упали на землю. Рыжик потянул носом: пахло морозом, хвоей и… чем‑то сладким. Он шагнул вперёд, и под лапкой хрустнул первый серебряный след.',
    image: '/img/advent/story/part-1.jpg',
  },
  {
    day: 5,
    title: 'Часть 2. Подарок под корнями',
    text: 'Следуя за огоньками, Рыжик наткнулся на старый дуб. У корней лежал маленький свёрток, перевязанный шёлковой нитью. Лисёнок осторожно развернул его — внутри оказалась Еловая шишка, но не простая: она светилась изнутри тёплым золотистым светом. «Это для того, кто верит», — прошелестел ветер. Рыжик прижал шишку к груди и побежал дальше.',
    image: '/img/advent/story/part-2.jpg',
  },
  {
    day: 9,
    title: 'Часть 3. Голос из метели',
    text: 'Вдруг небо потемнело, и началась метель. Рыжик забился под еловую лапу, дрожа от холода. Но тут сквозь вихри снега донёсся тихий голос: «Не бойся. Найди третий след — он ведёт к Рождественскому колоколу». Лисёнок поднял мордочку: среди снежинок мерцала тонкая серебряная нить. Он шагнул за ней, и метель расступилась.',
    image: '/img/advent/story/part-3.jpg',
  },
  {
    day: 12,
    title: 'Часть 4. Колокол без звука',
    text: 'Перед Рыжиком возник древний колокол, покрытый инеем. Он не звенел, но лисёнок чувствовал: если ударить в него, весь лес услышит. На боку колокола была выгравирована надпись: «Звенит лишь для тех, кто несёт в сердце Ангельский свет». Рыжик приложил лапку к холодному металлу — и колокол тихо загудел, рассыпая вокруг искры, похожие на бенгальские огни.',
    image: '/img/advent/story/part-4.jpg',
  },
  {
    day: 15,
    title: 'Часть 5. Встреча с хранителем',
    text: 'Из‑за деревьев вышел старый барсук в вязаной шапке. «Ты прошёл испытания, Рыжик, — сказал он. — Теперь ты знаешь: волшебство живёт там, где есть вера, надежда и доброта. Возьми это перо» — он протянул лисёнку пёрышко, переливающееся всеми цветами радуги. «Оно укажет путь к последнему следу».',
    image: '/img/advent/story/part-5.jpg',
  },
  {
    day: 19,
    title: 'Часть 6. Последний след',
    text: 'Пёрышко вело Рыжика через замёрзший ручей, мимо спящих зайцев и совы, сидящей на ветке, как статуя. Наконец он увидел: на поляне, окружённой заснеженными кустами, лежал маленький сундучок. Его крышка была украшена узором из семи звёзд. Лисёнок понял: это и есть цель его путешествия.',
    image: '/img/advent/story/part-6.jpg',
  },
  {
    day: 25,
    title: 'Часть 7. Открытие сундучка',
    text: 'Рыжик осторожно открыл сундучок. Внутри лежал свиток с надписью: «Тот, кто собрал все следы, знает ответ. Кодовое слово — ключ к рождественскому подарку». Лисёнок начал вспоминать все подсказки...',
    image: '/img/advent/story/part-7.jpg',
  },
])

// const final = {
//   text: 'Собрав буквы, он прошептал: «ВЕРА». В тот же миг сундучок засветился, и из него выпорхнула золотая звезда. Она взлетела над лесом, озарив его тёплым светом, а затем рассыпалась на тысячи искр, превратившихся в рождественские подарки для всех лесных жителей.',
//   odd: '«Волшебство Рождества начинается с веры в чудо. Спасибо, что помогли Рыжику его найти!»',
// }

const part = computed(() => parts.value.find((p) => p.day === day.dayNumber))
</script>
